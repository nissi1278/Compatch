<div class="container mx-auto p-4 lg:p-6 space-y-6">

    <h1 class="text-3xl font-bold text-gray-800 text-center"><%= @group.name %></h1>

    <div class="white-card border-0 p-4">
        <div class="flex items-center gap-3 mb-4">
        <i class="fas fa-calculator text-blue-600"></i>
        <h2 class="text-xl font-semibold text-gray-700">レシート金額</h2>
        </div>
        
        <%= form_with(model: @group, url: group_path(@group), method: :patch, data: { controller: "auto-submit" }) do |form| %>
            <%= form.number_field :total_amount,
                class: "input-field w-full p-2 border rounded-md", 
                placeholder: "レシート金額を入力",
                data: { action: "change->auto-submit#submit" },
                min: 0
            %>
            <%= inline_error_for(form, :total_amount) %>
        <% end %>
    </div>

    <div class="white-card border-0 p-4">
        <div class="flex items-center gap-3 mb-4">
            <i class="fas fa-receipt text-green-600"></i>
            <h2 class="text-xl font-semibold text-gray-700">計算結果</h2>
        </div>
        
        <%= turbo_frame_tag "calculation_results" do %>
            <%= render 'groups/calculation_results', result: @result %>
        <% end %>
        <div>
          <%= link_to "結果共有リンクをコピー",
                      share_group_path(@group.share_token),
                      class: "btn btn-primary",
                      data: {
                        controller: "clipboard",
                        action: "click->clipboard#copy",
                        clipboard_url_value: share_group_url(@group.share_token)
                      }%>
        </div>
    </div>

    <div class="white-card border-0 p-4">
        <div class="flex items-center gap-3 mb-4">
        <i class="fas fa-users text-purple-600"></i>
        <h2 class="text-xl font-semibold text-gray-700">参加者管理</h2>
        </div>

      <div id="participants_list"
           class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3
            overflow-y-auto max-h-96">
        <%= render @participants %>
      </div>
        <%= turbo_frame_tag "new_participant_form" do %>
            <%= render 'participants/form', group: @group, participant: @participant %>
        <% end %>
    </div>
</div>